<div class="l-module-title order__title">Detalle de la orden <a ui-sref="orders" class="order__close fa fa-times-circle"></a></div>
<div class="l-module-content order__content">
  <div></div>
  <h4 class="order__number">Orden {{ data.order }}</h4>
  <p class="order__description">{{ data.header }}</p>

  <table class="order__details">
    <tr ng-repeat="detail in data.details">
      <th>{{ detail.label }}</th>
      <td>{{ detail.value }}</td>
    </tr>
  </table>
  <div class="panel panel-primary" ng-repeat="operation in data.operations | byStatus" ng-class="{ 'operation--finished': operation.status === 3 }">
    <div class="panel-heading">{{ operation.title }}</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-4">
          <div ng-show="operation.lastStart" class="operation__time__result"><strong>Inicio:</strong> <time>{{ (operation.start || operation.lastStart) | date:dateFormat }}</time>
          </div>
          <div ng-show="operation.end" class="operation__time__result"><strong>Fin:</strong> <time>{{ operation.end | date:dateFormat }}</time>
          </div>
          <button ng-if="!operation.playing" ng-click="startOperation(operation)" type="button" class="btn btn-success btn-block">
            <i class="fa fa-play"></i>
          </button>
          <button ng-if="operation.playing" ng-click="pauseOperation(operation)" class="btn btn-warning btn-block">
            <i class="fa fa-pause"></i>
          </button>
          <button ng-disabled="operation.playing || !operation.end" ng-click="finishOperation(operation)" 
          class="btn btn-danger btn-block">Notificación final
          </button>
        </div>
        <div class="col-sm-8">
          <span class="operation__details__title">Detalles</span>
          <button type="button" class="btn btn-primary btn-sm print-button"><i class="fa fa-print"></i></button>
          <hr>
          <div class="operation__time__result"><strong>Estado:</strong> <span class="text-color-{{ operation.status }}">{{ statuses[operation.status] }}</span></div>
          <div class="operation__time__result"><strong>Tempo planificado:</strong> {{ timeFormatter(operation.duration) }}</div>
          <div ng-if="operation.partialTime" class="operation__time__result"><strong>Tempo parcial:</strong> <span ng-class="{ 'text-color-2' : operation.partialTime > operation.duration }">{{ timeFormatter(operation.partialTime) }}</span></div>
          <input type="text" placeholder="Detalle">         
        </div>
      </div>
    </div>
  </div>

  <div class="panel panel-primary">
    <div class="panel-heading">Mediciones</div>
    <div class="panel-body">  
      <table class="table">
        <tbody>
          <tr>
            <th>Presion de la máquina</th>
            <td>5 mb/s</td>
          </tr>
          <tr>
            <th>Medidor de agua</th>
            <td>7 tons</td>
          </tr>
          <tr>
            <th>Cilindros por metros cúbicos</th>
            <td>7</td>
          </tr>
          <tr>
            <th>Calibración de presión</th>
            <td>45 grados</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
